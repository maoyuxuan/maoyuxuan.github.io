(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["2e969394"],{"076a":function(t,e,n){},"3d71":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-page",{ref:"page",staticClass:"q-ma-lg"},[n("q-infinite-scroll",{ref:"infiniteScroll",attrs:{handler:t.getData}},[n("div",{ref:"box",staticClass:"row gutter-sm",attrs:{id:"box"}},t._l(t.items,function(t){return n("div",{staticClass:"col-md-4 col-sm-6 col-xs-12"},[n("Card",{attrs:{item:t}})],1)})),n("div",{staticClass:"row justify-center"},[1==t.infinite?n("q-spinner-dots",{attrs:{slot:"message",size:40},slot:"message"}):t._e(),0==t.infinite?n("p",{staticClass:"q-mt-md q-mb-none text-faded"},[t._v("加载完成")]):t._e()],1)]),n("q-btn",{directives:[{name:"back-to-top",rawName:"v-back-to-top"}],staticClass:"fixed-bottom-right",staticStyle:{margin:"0 15px 15px 0"},attrs:{round:"",color:"blue-grey-13"}},[n("q-icon",{attrs:{name:"keyboard_arrow_up"}})],1)],1)},a=[];i._withStripped=!0;var s=n("3156"),o=n.n(s),l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-card",[n("div",{staticClass:"albums"},[n("div",{staticClass:"row-img row gutter-xs"},[t._l(t.item.albums,function(e,i){return 1==t.albumsLength?n("div",{staticClass:"col-12"},[n("img",{style:{backgroundImage:"url("+e.url+")"},on:{click:function(e){t.fullScreen(i)}}})]):t._e()}),t._l(t.item.albums,function(e,i){return 2==t.albumsLength||4==t.albumsLength?n("div",{staticClass:"col-6"},[n("img",{style:{backgroundImage:"url("+e.url+")"},on:{click:function(e){t.fullScreen(i)}}})]):t._e()}),t._l(t.item.albums,function(e,i){return 3==t.albumsLength||t.albumsLength>4?n("div",{staticClass:"col-4"},[n("img",{style:{backgroundImage:"url("+e.url+")"},on:{click:function(e){t.fullScreen(i)}}})]):t._e()})],2),n("q-modal",{staticClass:"modal-card",attrs:{maximized:""},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[n("q-carousel",{ref:"carousel",staticClass:"text-white full-height",staticStyle:{width:"1000px","max-width":"100vw",margin:"auto"},attrs:{arrows:"",color:"white"},scopedSlots:t._u([{key:"control-full",fn:function(e){return n("q-carousel-control",{attrs:{position:"top-right",offset:[30,10]}},[n("q-btn",{attrs:{rounded:"",push:"",color:"amber",icon:"close"},on:{click:function(e){t.modal=!1}}})],1)}}])},t._l(t.item.albums,function(e,i){return n("q-carousel-slide",{key:"full-"+i,staticClass:"flex flex-center bg-black"},[n("div",{staticClass:"flex flex-center",on:{click:t.closeSilde}},[n("img",{attrs:{src:e.url}})])])}))],1)],1),n("q-card-title",[t._v("\n    "+t._s(t.item.title)+t._s(t.item.id)+"\n    "),n("span",{attrs:{slot:"subtitle"},slot:"subtitle"},[t._v(t._s(t.item.time)+" "+t._s(t.item.type))])]),n("q-card-separator"),n("q-card-actions",{attrs:{align:"around"}},[n("q-btn",{attrs:{flat:"",round:"",color:"primary",icon:"share"}}),n("q-btn",{attrs:{flat:"",round:"",color:"faded",icon:"comment"}}),n("q-btn",{attrs:{flat:"",round:"",color:"red",icon:"favorite"}})],1)],1)},r=[];l._withStripped=!0;var c={name:"Card",components:{},props:{item:Object},computed:{albumsLength:function(){return this.item.albums.length}},data:function(){return{len:0,modal:!1}},mounted:function(){},methods:{fullScreen:function(t){this.modal=!0,this.$refs.carousel.goToSlide(t)},closeSilde:function(){console.log("close"),this.modal=!1}}},u=c,f=(n("83fb"),n("5eb1"),n("2877")),d=Object(f["a"])(u,l,r,!1,null,"355a0452",null);d.options.__file="index.vue";var m=d.exports;n("551c");function h(t){return new Promise(function(e,n){setTimeout(function(){for(var n=[],i=(t.pageIndex-1)*t.pageSize+1,a=i;a<i+t.pageSize;a++){for(var s=[],o=0;o<Math.floor(10*Math.random());o++)s.push({url:"http://10.10.117.54:8080/assets/thumb/"+Math.floor(9*Math.random())+".jpg"});n.push({id:a,albums:s,title:"今天今天今天今天今天今天今天今天今天今天",time:"2017-05-08 12:33",type:"知识分享"})}e({list:n,pageCount:10,total:50})},1e3)})}var p=n("2f62"),g={name:"PageIndex",components:{Card:m},data:function(){return{items:[],infinite:!0}},computed:o()({},Object(p["b"])(["example"])),watch:{items:function(){var t=this;t.$nextTick(function(){t.waterfall()})},"$store.state.example.drawerState":function(t){console.log(t);var e=this,n=setInterval(function(){e.waterfall()},10);setTimeout(function(){clearInterval(n)},120)}},mounted:function(){var t=this;window.onresize=function(){t.waterfall()}},updated:function(){},methods:{getData:function(t,e){var n=this,i=this;h({pageSize:10,pageIndex:t}).then(function(a){i.items=i.items.concat(a.list),t==a.pageCount&&(i.infinite=!1,n.$refs.infiniteScroll.stop()),e()}).catch(function(t){})},waterfall:function(){var t=this.$refs.box;if(void 0!=t){var e=t.children,n=0,i=this.getClient().width,a=e[0].offsetWidth;console.log(a);for(var s=parseInt(i/(a+n)),o=[],l=0,r=0;r<e.length;r++)if(r<s)e[r].style.top=0,e[r].style.left=(a+n)*r+"px",o.push(e[r].offsetHeight);else{for(var c=o[0],u=0,f=0;f<o.length;f++)c>o[f]&&(c=o[f],u=f);e[r].style.top=o[u]+n+"px",e[r].style.left=e[u].offsetLeft+"px",o[u]=o[u]+e[r].offsetHeight+n}for(f=0;f<o.length;f++)l<o[f]&&(l=o[f]);t.style.height=l+"px"}},getClient:function(){return{width:this.$refs.page.$el.offsetWidth+48,height:this.$refs.page.$el.offsetHeight+48}}}},b=g,v=(n("9dfb"),Object(f["a"])(b,i,a,!1,null,"e39fbb1c",null));v.options.__file="Index.vue";e["default"]=v.exports},"5eb1":function(t,e,n){"use strict";var i=n("78c3"),a=n.n(i);a.a},"78c3":function(t,e,n){},"83fb":function(t,e,n){"use strict";var i=n("9d30"),a=n.n(i);a.a},"9d30":function(t,e,n){},"9dfb":function(t,e,n){"use strict";var i=n("076a"),a=n.n(i);a.a}}]);